#TOGT


##Abstract
Time-minimum trajectories through race tracks are determined by the drone's capability as well as the configuration of all gates (e.g., their shapes, sizes, and orientations). However, prior works neglect the impact of the gate configuration and formulate drone racing as a waypoint flight task, leading to conservative waypoint selection through each gate. We present a novel time-optimal planner that can account for gate constraints explicitly, enabling quadrotors to follow the most time-efficient waypoints at their single-rotor-thrust limits in tracks with hybrid gate types. Our approach provides comparable solution quality to the state-of-the-art but with a computation time orders of magnitude faster. Furthermore, the proposed framework allows users to customize gate constraints such as tunnels by concatenating existing gate classes, enabling high-fidelity race track modeling. Owing to the superior computation efficiency and flexibility, we can generate optimal racing trajectories for complex race tracks with tens or even hundreds of gates with distinct shapes. We validate our method in real-world flights and demonstrate that faster lap times can be produced by using gate constraints instead of waypoint constraints.